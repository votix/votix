function relatedPostsWidget(a){(function(e){var f={blogURL:"",maxPosts:10,maxTags:10,maxPostsPerTag:10,containerSelector:"",tags:null,loadingText:"",loadingClass:"",relevantTip:"",relatedTitle:"Related Posts",rlpBlank:"https://web.archive.org/web/20131114083532/http://1.bp.blogspot.com/-htG7vy9vIAA/Tp0KrMUdoWI/AAAAAAAABAU/e7XkFtErqsU/s1600/grey.gif",rlt_thumb:70,rlt_monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],recentTitle:"Recent Posts",postScoreClass:"",onLoad:false};f=e.extend({},f,a);var k=0,b=null,g=null;if(!f.containerSelector){document.write('<div id="related-postsx"></div>');f.containerSelector="#related-postsx"}var c=function(y,o){k++;if(y.feed.entry){for(var p=0;p<y.feed.entry.length;p++){var v=y.feed.entry[p];var r="";for(var n=0;n<v.link.length;n++){if(v.link[n].rel=="alternate"){r=v.link[n].href;break}}var q=v.published.$t.substring(0,10);var m=q.substring(0,4);var x=q.substring(5,7);var t=q.substring(8,10);var s=f.rlt_monthNames[parseInt(x,10)-1];var z=v.thr$total.$t;var l=v.author[0].name.$t;var u=v.title.$t;if("media$thumbnail" in v){var w=v.media$thumbnail.url.replace(/\/s[0-9]+\-c/g,"/s"+f.rlt_thumb+"-c")}else{var w=f.rlpBlank}if(location.href.toLowerCase()!=r.toLowerCase()){i(r,u,w,m,t,z,s,l)}}}if(k>=f.tags.length){g.attr("class","");e("#related-posts-loadingtext",b).remove();if(f.maxPosts>0){e("li:gt("+(f.maxPosts-1)+")",g).remove()}}};var i=function(q,w,x,m,u,y,s,l){var r=e("li",g);for(var p=0;p<r.length;p++){var v=e("a",r.eq(p));var t=j(v);if(v.attr("href")==q){h(v,++t);for(var o=p-1;o>=0;o--){var n=e("a",r.eq(o));if(j(n)>t){if(p-o>1){r.eq(o).after(r.eq(p))}return}}if(p>0){r.eq(0).before(r.eq(p))}return}}g.append('<li><a href="'+q+'" title="'+(f.relevantTip?f.relevantTip.replace("\d",1):"")+'"><span><div class="overlayb"></div><img alt="'+w+'" src="'+x+'"/></span><strong>'+w+'</strong></a><div class="infonya"><span class="dt">'+u+" "+s+" "+m+'</span><span class="auty">'+l+'</span><span class="jkmt">'+y+"</span></div></li>")};var j=function(l){var m=parseInt(l.attr("score"));return m>0?m:1};var h=function(l,m){l.attr("score",m);if(f.relevantTip){l.attr("title",f.relevantTip.replace("\d",m))}if(f.postScoreClass){l.attr("class",f.postScoreClass+m)}};var d=function(){if(f.containerSelector!="#related-postsx"){var l=e(f.containerSelector);if(l.length!=1){return}b=e('<div id="related-postsx"></div>').appendTo(l)}else{b=e(f.containerSelector)}if(!f.tags){f.tags=[];e('a[rel="tag"]:lt('+f.maxTags+")").each(function(){var n=e.trim(e(this).text().replace(/\n/g,""));if(e.inArray(n,f.tags)==-1){f.tags[f.tags.length]=n}})}if(f.tags.length==0&&!f.recentTitle){return}if(f.tags.length==0){e("<h4>"+f.recentTitle+"</h4>").appendTo(b)}else{if(f.relatedTitle){e("<h4>"+f.relatedTitle+"</h4>").appendTo(b)}}if(f.loadingText){e('<div id="related-posts-loadingtext">'+f.loadingText+"</div>").appendTo(b)}g=e("<ul "+(f.loadingClass?'class="'+f.loadingClass+'"':"")+"></ul>").appendTo(b);if(f.tags.length==0){e.ajax({url:f.blogURL+"/feeds/posts/summary/",data:{"max-results":f.maxPostsPerTag,alt:"json-in-script"},success:c,dataType:"jsonp",cache:true})}else{for(var m=0;m<f.tags.length;m++){e.ajax({url:f.blogURL+"/feeds/posts/summary/",data:{category:f.tags[m],"max-results":f.maxPostsPerTag,alt:"json-in-script"},success:c,dataType:"jsonp",cache:true})}}};if(f.onLoad){e(window).load(d)}else{e(document).ready(d)}})(jQuery)};
